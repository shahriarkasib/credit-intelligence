(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3523:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5458:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6264:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4900:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},4280:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9409:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2549:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8945:function(e,s,t){Promise.resolve().then(t.bind(t,2304))},2304:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return q}});var a=t(7437),l=t(2265),d=t(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,d.Z)("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var i=t(2549);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,d.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var o=t(6264);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,d.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=(0,d.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),u=(0,d.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var x=t(9409);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),p=(0,d.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),b=(0,d.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var j=t(4900);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,d.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var N=t(4280);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,d.Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var f=t(3523);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,d.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=t(5458),_=t(6637);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,d.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var S=t(9670);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,d.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),A=(0,d.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),T=(0,d.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),F=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),R=(0,d.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),D=(0,d.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var M=t(1981),Z=t(1396),E=t.n(Z);let L=e=>{let{text:s,children:t}=e,[d,i]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("button",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:()=>i(!d),className:"ml-1 text-studio-muted hover:text-studio-accent transition-colors",type:"button",children:t||(0,a.jsx)(r,{className:"w-4 h-4"})}),d&&(0,a.jsxs)("div",{className:"absolute z-50 bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-64 p-3 bg-black border border-studio-border rounded-lg shadow-lg text-xs text-white",children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:s}),(0,a.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-black border-r border-b border-studio-border"})]})]})},I=e=>{let{isOpen:s,onClose:t}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:t,children:(0,a.jsxs)("div",{className:"bg-studio-bg border border-studio-border rounded-lg w-full max-w-3xl max-h-[80vh] overflow-auto m-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-studio-bg border-b border-studio-border p-4 flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(r,{className:"w-5 h-5 text-studio-accent"}),"Understanding Your Credit Analysis"]}),(0,a.jsx)("button",{onClick:t,className:"text-studio-muted hover:text-white p-1",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6 text-sm",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-studio-accent font-semibold mb-3 text-base",children:"\uD83D\uDCCA Result Metrics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-green-400 mb-1",children:"Risk Level"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," How risky is it to give credit to this company?"]}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-studio-muted",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"Low"})," = Very safe, company is financially healthy"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-yellow-400",children:"Medium"})," = Some concerns, proceed with caution"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-orange-400",children:"High"})," = Significant risk, may have financial troubles"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-red-400",children:"Critical"})," = Very dangerous, high chance of default"]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-400 mb-1",children:"Credit Score (0-1000)"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," A number rating the company's creditworthiness, like a personal credit score but for businesses."]}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-studio-muted",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"800-1000"})," = Excellent - top tier company"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"650-799"})," = Good - reliable company"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-yellow-400",children:"500-649"})," = Fair - some concerns"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-orange-400",children:"350-499"})," = Poor - high risk"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-red-400",children:"0-349"})," = Very Poor - likely to default"]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-purple-400 mb-1",children:"Confidence (%)"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," How sure is the AI about its assessment?"]}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-studio-muted",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"80-100%"})," = Very confident - lots of data available"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-yellow-400",children:"60-79%"})," = Moderately confident - some data gaps"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-orange-400",children:"40-59%"})," = Low confidence - limited data"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-red-400",children:"0-39%"})," = Very uncertain - take results with caution"]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-studio-accent mb-1",children:"Eval Score (%)"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," How well did the AI perform the analysis? This measures the AI's work quality, NOT the company's quality."]}),(0,a.jsxs)("div",{className:"mt-2 p-2 bg-yellow-900/20 border border-yellow-800 rounded",children:[(0,a.jsx)("p",{className:"text-yellow-400 font-medium",children:"⚠️ Why is Eval Score 0%?"}),(0,a.jsx)("p",{className:"text-studio-muted mt-1",children:"This happens when the evaluation step hasn't run yet or there was no evaluation data saved. It does NOT mean the analysis is bad. The Result (Risk Level, Credit Score) is still valid."})]})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-studio-accent font-semibold mb-3 text-base",children:"\uD83C\uDFAF Evaluation Metrics (AI Performance)"}),(0,a.jsx)("p",{className:"text-studio-muted mb-4",children:"These scores measure how well the AI performed the analysis. Think of it like grading a student's homework - these grades are about the AI's work, not the company."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-400 mb-1",children:"Tool Selection Score"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," Did the AI use the right data sources for this company?"]}),(0,a.jsxs)("div",{className:"mt-2 bg-black/30 p-2 rounded",children:[(0,a.jsx)("p",{className:"text-studio-muted text-xs mb-2",children:(0,a.jsx)("strong",{children:"How it's calculated:"})}),(0,a.jsxs)("ul",{className:"space-y-1 text-studio-muted text-xs",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"Precision"}),": Of the tools it used, how many were actually useful?"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"Recall"}),": Did it use all the tools it should have?"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"F1 Score"}),": The balance between Precision and Recall"]})]}),(0,a.jsx)("p",{className:"text-studio-muted text-xs mt-2",children:"Example: If analyzing a public company, it should use SEC filings. If it skipped that, recall goes down. If it used irrelevant sources, precision goes down."})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-purple-400 mb-1",children:"Data Quality Score"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," How complete and useful was the data the AI gathered?"]}),(0,a.jsxs)("div",{className:"mt-2 bg-black/30 p-2 rounded",children:[(0,a.jsx)("p",{className:"text-studio-muted text-xs mb-2",children:(0,a.jsx)("strong",{children:"Factors considered:"})}),(0,a.jsxs)("ul",{className:"space-y-1 text-studio-muted text-xs",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"Completeness"}),": Did it find financial data, news, legal info?"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"Sources Used"}),": How many different sources provided data?"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"Data Freshness"}),": Is the data recent and relevant?"]})]}),(0,a.jsx)("p",{className:"text-studio-muted text-xs mt-2",children:"Low score means: Missing important data, couldn't access some sources, or data is outdated."})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-green-400 mb-1",children:"Synthesis Score"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," How well did the AI combine all the data into a final assessment?"]}),(0,a.jsxs)("div",{className:"mt-2 bg-black/30 p-2 rounded",children:[(0,a.jsx)("p",{className:"text-studio-muted text-xs mb-2",children:(0,a.jsx)("strong",{children:"Checks if the output has:"})}),(0,a.jsxs)("ul",{className:"space-y-1 text-studio-muted text-xs",children:[(0,a.jsx)("li",{children:"• A clear risk level"}),(0,a.jsx)("li",{children:"• A credit score with justification"}),(0,a.jsx)("li",{children:"• Specific recommendations"}),(0,a.jsx)("li",{children:"• Reasoning that matches the data"})]}),(0,a.jsx)("p",{className:"text-studio-muted text-xs mt-2",children:"Low score means: The AI might have skipped some output fields or the reasoning doesn't fully explain the conclusion."})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-studio-accent mb-1",children:"Overall Score"}),(0,a.jsxs)("p",{className:"text-studio-muted",children:[(0,a.jsx)("strong",{children:"What it means:"})," The average of Tool Selection, Data Quality, and Synthesis scores."]}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-studio-muted",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-green-400",children:"80-100%"})," = Excellent analysis - trust the results"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-yellow-400",children:"60-79%"})," = Good analysis - minor issues"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-orange-400",children:"40-59%"})," = Fair analysis - review manually"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("span",{className:"text-red-400",children:"0-39%"})," = Poor analysis - may need to re-run or check manually"]})]})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-studio-accent font-semibold mb-3 text-base",children:"❓ Common Questions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-white mb-1",children:"Why is my Eval Score 0%?"}),(0,a.jsx)("p",{className:"text-studio-muted",children:"The evaluation step may not have completed or saved. This is a technical issue and doesn't affect the actual credit analysis. Your Risk Level and Credit Score are still valid."})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-white mb-1",children:"Why is Tool Selection low?"}),(0,a.jsx)("p",{className:"text-studio-muted",children:"Either: (1) Some data sources were unavailable, (2) The company type didn't match available tools (e.g., private company with no SEC filings), or (3) The AI chose unnecessary tools."})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-white mb-1",children:"Can I trust a low-confidence result?"}),(0,a.jsx)("p",{className:"text-studio-muted",children:"Use it as a starting point, but verify with your own research. Low confidence usually means limited public data is available for that company."})]}),(0,a.jsxs)("div",{className:"p-3 bg-studio-panel rounded border border-studio-border",children:[(0,a.jsx)("h4",{className:"font-medium text-white mb-1",children:"What data sources are used?"}),(0,a.jsx)("p",{className:"text-studio-muted",children:"SEC filings, Finnhub financial data, Tavily web search, CourtListener legal records, and more. Check the Traces tab to see exactly which sources were used."})]})]})]})]})]})}):null},P=e=>{{let s="https:"===window.location.protocol?"wss:":"ws:";return"".concat(s,"//").concat(window.location.host).concat(e)}};function q(){var e,s,t,d,i;let[R,D]=(0,l.useState)("single"),[M,Z]=(0,l.useState)("result"),[q,W]=(0,l.useState)(""),[z,V]=(0,l.useState)(!1),[H,B]=(0,l.useState)(null),[U,J]=(0,l.useState)([]),[Q,G]=(0,l.useState)(null),[K,X]=(0,l.useState)(new Set),[Y,$]=(0,l.useState)([""]),[ee,es]=(0,l.useState)([]),[et,ea]=(0,l.useState)(!1),[el,ed]=(0,l.useState)({current:0,total:0}),[er,ei]=(0,l.useState)([]),[en,eo]=(0,l.useState)(null),[ec,em]=(0,l.useState)(null),[eu,ex]=(0,l.useState)([]),[eh,ep]=(0,l.useState)(null),[eb,ej]=(0,l.useState)(!1),[eg,eN]=(0,l.useState)([]),[ev,ef]=(0,l.useState)(""),[ey,ew]=(0,l.useState)(!1),[e_,ek]=(0,l.useState)(null),[eS,eC]=(0,l.useState)(null),[eA,eT]=(0,l.useState)(!1),[eF,eR]=(0,l.useState)({}),[eD,eM]=(0,l.useState)(""),[eZ,eE]=(0,l.useState)(""),[eL,eI]=(0,l.useState)(0),eP=(0,l.useRef)(null),eq=(0,l.useRef)(null),eO=(0,l.useRef)(null),eW=(0,l.useRef)(null),ez=(0,l.useRef)(null);(0,l.useEffect)(()=>{var e;null===(e=eq.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[U]),(0,l.useEffect)(()=>{if(null==H?void 0:H.current_step){let e=setTimeout(()=>{let e=document.querySelector('[data-step-status="running"]');e&&e.scrollIntoView({behavior:"smooth",block:"center"})},300);return()=>clearTimeout(e)}},[null==H?void 0:H.current_step]),(0,l.useEffect)(()=>{eV()},[]),(0,l.useEffect)(()=>{(null==H?void 0:H.status)==="completed"&&H.run_id&&eB(H.run_id)},[null==H?void 0:H.status,null==H?void 0:H.run_id]);let eV=async e=>{try{let s=new URLSearchParams({limit:"50"});e&&s.append("search",e);let t=await fetch("".concat("","/logs/runs/history?").concat(s));if(t.ok){let e=await t.json();e.runs&&eN(e.runs.map(e=>({run_id:e.run_id,company_name:e.company_name,status:e.status||"completed",risk_level:e.risk_level,credit_score:e.credit_score,evaluation_score:e.overall_score,started_at:e.timestamp||new Date().toISOString(),completed_at:e.timestamp||new Date().toISOString(),duration_ms:e.duration_ms})))}}catch(e){console.error("Failed to fetch historical runs:",e)}},eH=async e=>{ek(e),eT(!0),eC(null);try{let[s,t]=await Promise.all([fetch("".concat("","/logs/runs/").concat(e,"/details")),fetch("".concat("","/evaluate/coalition/").concat(e)).catch(()=>null)]),a={};if(s.ok&&(a=await s.json()),null==t?void 0:t.ok)try{a.coalition=await t.json()}catch(e){console.warn("Failed to parse coalition response")}eC(a)}catch(e){console.error("Failed to fetch run details:",e)}finally{eT(!1)}},eB=async e=>{ej(!0);try{let s=await fetch("".concat("","/logs/traces/").concat(e));if(s.ok){let e=await s.json();ex(e.traces||[])}let t=await fetch("".concat("","/logs/evaluations/").concat(e));if(t.ok){let e=await t.json();ep(e.evaluation)}}catch(e){console.error("Failed to fetch traces/eval:",e)}finally{ej(!1)}},eU=(0,l.useCallback)((e,s,t)=>{J(a=>[...a,{timestamp:new Date().toISOString(),type:e,message:s,data:t}])},[]),eJ=e=>{X(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})};(0,l.useEffect)(()=>{if(null==H?void 0:H.steps){let e=H.steps.find(e=>"evaluate"===e.step_id);(null==e?void 0:e.output_data)&&em({tool_selection_score:e.output_data.tool_selection_score||0,data_quality_score:e.output_data.data_quality_score||0,synthesis_score:e.output_data.synthesis_score||0,overall_score:e.output_data.overall_score||0,tool_selection:e.output_data.tool_selection,data_quality:e.output_data.data_quality,synthesis:e.output_data.synthesis})}},[H]),(0,l.useEffect)(()=>{if((null==H?void 0:H.status)==="completed"||(null==H?void 0:H.status)==="failed"){var e,s,t;let a={run_id:H.run_id,company_name:H.company_name,status:H.status,risk_level:null===(e=H.result)||void 0===e?void 0:e.risk_level,credit_score:null===(s=H.result)||void 0===s?void 0:s.credit_score,evaluation_score:null===(t=H.result)||void 0===t?void 0:t.evaluation_score,started_at:H.started_at,completed_at:H.completed_at,duration_ms:H.completed_at&&H.started_at?new Date(H.completed_at).getTime()-new Date(H.started_at).getTime():void 0};ei(e=>[a,...e.filter(e=>e.run_id!==H.run_id)])}},[null==H?void 0:H.status]);let eQ=(0,l.useCallback)(e=>{let s=P("/ws/".concat(e));eU("system","Connecting to WebSocket: ".concat(s));let t=new WebSocket(s);t.onopen=()=>{eU("system","WebSocket connected")},t.onmessage=e=>{var s,a,l;let d=JSON.parse(e.data);switch(d.type){case"current_state":case"workflow_started":B(d.data),eU("workflow","Workflow started for ".concat(d.data.company_name));break;case"step_update":B(e=>{if(!e)return e;let s=[...e.steps],t={...d.data.step,output_data:d.data.output_data||d.data.step.output_data};return s[d.data.step_index]=t,{...e,steps:s,current_step:d.data.step.name}});let r=d.data.step;if(d.data.description&&eE(d.data.description),void 0!==d.data.progress_percent&&eI(d.data.progress_percent),"running"===r.status){eU("step","Starting: ".concat(r.name),r),X(e=>new Set([...e,r.step_id])),eR(e=>({...e,[r.step_id]:""})),eM(r.step_id);let e=()=>{let e=document.querySelector('[data-step-status="running"]'),s=ez.current;e&&s&&e.scrollIntoView({behavior:"smooth",block:"center"})};setTimeout(e,300),setTimeout(e,600),setTimeout(e,1e3)}else"completed"===r.status?(eU("step","Completed: ".concat(r.name," (").concat(null===(s=r.duration_ms)||void 0===s?void 0:s.toFixed(0),"ms)"),r),eM("")):"failed"===r.status&&(eU("error","Failed: ".concat(r.name," - ").concat(r.error),r),eM(""));break;case"llm_token":let i=d.data.node||eD;i&&eR(e=>({...e,[i]:(e[i]||"")+(d.data.content||"")}));break;case"step_output":B(e=>{if(!e)return e;let s=[...e.steps],t=s.findIndex(e=>e.step_id===d.data.step_id);return t>=0&&(s[t]={...s[t],input_data:d.data.input,output_data:d.data.output}),{...e,steps:s}});break;case"workflow_completed":B(d.data),V(!1),eM(""),eE(""),eI(100),eU("success","Workflow completed! Risk: ".concat(null===(a=d.data.result)||void 0===a?void 0:a.risk_level,", Score: ").concat(null===(l=d.data.result)||void 0===l?void 0:l.credit_score)),Z("result"),setTimeout(()=>{var e;null===(e=eW.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}),window.scrollTo({top:0,behavior:"smooth"})},300);break;case"workflow_failed":B(d.data.status),V(!1),eM(""),eE(""),G(d.data.error),eU("error","Workflow failed: ".concat(d.data.error));break;case"api_error":let n=d.data,o="rate_limit"===n.error_type?"Rate Limit":"quota_exceeded"===n.error_type?"Quota Exceeded":"API Error";eU("warning","".concat(o,": ").concat(n.message)),G("".concat(o,": ").concat(n.message));break;case"ping":t.send("pong")}},t.onerror=()=>{eU("error","WebSocket error")},t.onclose=()=>{eU("system","WebSocket disconnected")},eP.current=t},[eU]);(0,l.useEffect)(()=>{(async()=>{try{let s=await fetch("".concat("","/runs/active"));if(s.ok){var e;let t=await s.json();if((null===(e=t.runs)||void 0===e?void 0:e.length)>0){let e=t.runs[0];console.log("Found active run, reconnecting:",e.run_id);let s=e.steps||[];B({run_id:e.run_id,company_name:e.company_name,status:e.status,current_step:e.current_step,steps:s,started_at:e.started_at}),W(e.company_name),V(!0),D("single");let a=s.filter(e=>"completed"===e.status).length,l=s.length||8;eI(Math.round(a/l*100));let d=s.filter(e=>"completed"===e.status||"running"===e.status).map(e=>e.step_id);X(new Set(d));let r=s.find(e=>"running"===e.status);r&&eM(r.step_id),eQ(e.run_id),J([{timestamp:new Date().toISOString(),type:"system",message:"Resumed active analysis for ".concat(e.company_name)}])}}}catch(e){console.error("Failed to check for active runs:",e)}})()},[eQ]);let eG=async()=>{if(!q.trim()){G("Please enter a company name");return}G(null),V(!0),B(null),J([]),X(new Set),em(null),Z("result"),eU("system","Starting analysis for: ".concat(q));try{let e=await fetch("".concat("","/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_name:q})});if(!e.ok)throw Error("API error: ".concat(e.statusText));let s=await e.json();eU("system","Run started: ".concat(s.run_id)),eQ(s.run_id)}catch(e){G(e.message),V(!1),eU("error","Failed to start: ".concat(e.message))}},eK=async()=>{let e=Y.filter(e=>e.trim());if(0===e.length){G("Please enter at least one company name");return}G(null),ea(!0),es([]),ed({current:0,total:e.length});for(let s=0;s<e.length;s++){ed({current:s+1,total:e.length});try{let t=await fetch("".concat("","/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_name:e[s]})});if(!t.ok)throw Error("API error: ".concat(t.statusText));let a=await t.json(),l=null;for(let e=0;e<120;e++){await new Promise(e=>setTimeout(e,1e3));let e=await fetch("".concat("","/status/").concat(a.run_id));if(e.ok&&((null==(l=await e.json())?void 0:l.status)==="completed"||(null==l?void 0:l.status)==="failed"))break}l&&es(e=>[...e,l])}catch(t){console.error("Failed to analyze ".concat(e[s],":"),t)}}ea(!1)},eX=()=>{eP.current&&(eP.current.close(),eP.current=null),V(!1),eU("system","Analysis stopped by user")},eY=e=>{$(s=>s.filter((s,t)=>t!==e))},e$=(e,s)=>{$(t=>t.map((t,a)=>a===e?s:t))},e0=e=>{switch(e){case"pending":default:return(0,a.jsx)(n,{className:"w-4 h-4 text-studio-muted"});case"running":return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-studio-accent animate-spin"});case"completed":return(0,a.jsx)(c,{className:"w-4 h-4 text-green-500"});case"failed":return(0,a.jsx)(m,{className:"w-4 h-4 text-red-500"})}},e2=e=>{switch(null==e?void 0:e.toLowerCase()){case"low":return"text-green-400 bg-green-900/20 border-green-800";case"medium":return"text-yellow-400 bg-yellow-900/20 border-yellow-800";case"high":return"text-orange-400 bg-orange-900/20 border-orange-800";case"critical":return"text-red-400 bg-red-900/20 border-red-800";default:return"text-gray-400 bg-gray-900/20 border-gray-800"}},e1=e=>void 0===e?"N/A":"".concat((100*e).toFixed(0),"%");return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-studio-bg",children:[(0,a.jsx)("header",{className:"border-b border-studio-border px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u,{className:"w-6 h-6 text-studio-accent"}),(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Credit Intelligence Playground"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(E(),{href:"/prompts",className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-studio-panel hover:bg-studio-border rounded transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Prompts"]}),(0,a.jsxs)(E(),{href:"/settings",className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-studio-panel hover:bg-studio-border rounded transition-colors",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),"Settings"]}),(0,a.jsxs)("button",{onClick:()=>ew(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-yellow-600 hover:bg-yellow-700 rounded transition-colors",children:[(0,a.jsx)(r,{className:"w-4 h-4"}),"Help"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-studio-muted",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(z||et?"bg-green-500 animate-pulse":"bg-gray-500")}),z||et?"Running":"Idle"]})]})]})}),(0,a.jsx)("div",{className:"border-b border-studio-border px-6",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>D("single"),className:"px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("single"===R?"border-studio-accent text-studio-accent":"border-transparent text-studio-muted hover:text-white"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"w-4 h-4"}),"Single Analysis"]})}),(0,a.jsx)("button",{onClick:()=>D("batch"),className:"px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("batch"===R?"border-studio-accent text-studio-accent":"border-transparent text-studio-muted hover:text-white"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b,{className:"w-4 h-4"}),"Batch Analysis"]})}),(0,a.jsx)("button",{onClick:()=>D("history"),className:"px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("history"===R?"border-studio-accent text-studio-accent":"border-transparent text-studio-muted hover:text-white"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n,{className:"w-4 h-4"}),"Run History (",er.length,")"]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:["single"===R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-96 border-r border-studio-border flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-studio-border",children:[(0,a.jsx)("label",{className:"block text-sm text-studio-muted mb-2",children:"Company Name"}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("input",{type:"text",value:q,onChange:e=>W(e.target.value),placeholder:"e.g., Netflix, Apple, Tesla",className:"flex-1 bg-studio-panel border border-studio-border rounded px-3 py-2 text-sm focus:outline-none focus:border-studio-accent",disabled:z,onKeyDown:e=>"Enter"===e.key&&!z&&eG()})}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[z?(0,a.jsxs)("button",{onClick:eX,className:"flex-1 flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 rounded px-4 py-2 text-sm font-medium transition-colors",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),"Stop"]}):(0,a.jsxs)("button",{onClick:eG,disabled:!q.trim(),className:"flex-1 flex items-center justify-center gap-2 bg-studio-accent hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded px-4 py-2 text-sm font-medium transition-colors",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Run Analysis"]}),(0,a.jsx)("button",{onClick:()=>{eX(),B(null),J([]),G(null),W(""),X(new Set),em(null)},className:"p-2 text-studio-muted hover:text-white transition-colors",title:"Reset",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]}),Q&&(0,a.jsx)("div",{className:"mt-3 p-2 rounded text-sm ".concat(Q.includes("Rate Limit")||Q.includes("Quota Exceeded")?"bg-orange-900/30 border border-orange-800 text-orange-400":"bg-red-900/30 border border-red-800 text-red-400"),children:Q})]}),(0,a.jsxs)("div",{ref:ez,className:"flex-1 overflow-auto p-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-studio-muted mb-3 flex items-center gap-2",children:[(0,a.jsx)(v,{className:"w-4 h-4"}),"Workflow Pipeline"]}),(null==H?void 0:H.steps)&&H.steps.length>0?(0,a.jsx)("div",{className:"space-y-2",children:H.steps.map((e,s)=>(0,a.jsxs)("div",{"data-step-status":e.status,"data-step-id":e.step_id,ref:"running"===e.status?eO:null,children:[(0,a.jsxs)("div",{onClick:()=>eJ(e.step_id),className:"p-3 rounded border cursor-pointer transition-all ".concat("running"===e.status?"border-studio-accent bg-studio-accent/10 pulse-glow":"completed"===e.status?"border-green-800 bg-green-900/20 hover:bg-green-900/30":"failed"===e.status?"border-red-800 bg-red-900/20 hover:bg-red-900/30":"border-studio-border bg-studio-panel hover:bg-studio-border/50"," ").concat(K.has(e.step_id)?"rounded-b-none":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e0(e.status),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-xs text-studio-muted font-mono",children:e.agent_name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.duration_ms&&(0,a.jsxs)("span",{className:"text-xs text-studio-muted",children:[e.duration_ms.toFixed(0),"ms"]}),"pending"!==e.status&&(K.has(e.step_id)?(0,a.jsx)(f.Z,{className:"w-4 h-4 text-studio-muted"}):(0,a.jsx)(y,{className:"w-4 h-4 text-studio-muted"}))]})]}),e.error&&(0,a.jsx)("div",{className:"text-xs text-red-400 mt-2 ml-6",children:e.error})]}),K.has(e.step_id)&&"pending"!==e.status&&(0,a.jsxs)("div",{className:"border border-t-0 border-studio-border rounded-b bg-black/50 p-3 max-h-96 overflow-auto",children:[("running"===e.status||eF[e.step_id])&&(0,a.jsxs)("div",{className:"mb-3 bg-studio-panel/50 border border-studio-accent/30 rounded p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-studio-accent ".concat("running"===e.status?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs text-studio-accent font-medium",children:"AI Thinking"})]}),(0,a.jsxs)("div",{className:"font-mono text-xs text-studio-text whitespace-pre-wrap max-h-32 overflow-auto bg-black/30 rounded p-2",children:[eF[e.step_id]||"Processing...","running"===e.status&&(0,a.jsx)("span",{className:"inline-block w-1.5 h-3 bg-studio-accent animate-pulse ml-0.5"})]})]}),e.output_summary&&(0,a.jsxs)("div",{className:"mb-2 p-2 bg-studio-accent/10 rounded border border-studio-accent/30",children:[(0,a.jsx)("div",{className:"text-xs text-studio-accent font-medium",children:"Summary"}),(0,a.jsx)("div",{className:"text-sm text-white",children:e.output_summary})]}),e.output_data&&Object.keys(e.output_data).length>0&&(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(e.output_data).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsxs)("span",{className:"text-yellow-400 font-mono",children:[s,":"]})," ",(0,a.jsx)("pre",{className:"text-green-300 whitespace-pre-wrap break-all inline",children:"object"==typeof t?JSON.stringify(t,null,2):String(t)})]},s)})})]})]},e.step_id))}):(0,a.jsx)("div",{className:"text-center py-8 text-studio-muted text-sm",children:'Enter a company name and click "Run Analysis" to start'})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[H&&(0,a.jsx)("div",{className:"border-b border-studio-border px-4",children:(0,a.jsx)("div",{className:"flex gap-1",children:["result","evaluation","traces","pipeline"].map(e=>(0,a.jsxs)("button",{onClick:()=>Z(e),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors capitalize ".concat(M===e?"border-studio-accent text-studio-accent":"border-transparent text-studio-muted hover:text-white"),children:["result"===e&&(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),"Result"]}),"evaluation"===e&&(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{className:"w-4 h-4"}),"Evaluation"]}),"traces"===e&&(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"}),"Traces"]}),"pipeline"===e&&(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{className:"w-4 h-4"}),"Pipeline"]})]},e))})}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[z&&H&&(0,a.jsxs)("div",{className:"sticky top-0 z-10 px-4 py-3 border-b border-studio-border bg-studio-panel/95 backdrop-blur-sm shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-4 h-4 text-studio-accent animate-pulse"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-studio-text",children:["Analyzing ",H.company_name]}),H.steps&&H.steps.length>0&&(0,a.jsxs)("span",{className:"text-xs bg-studio-accent/20 text-studio-accent px-2 py-0.5 rounded-full",children:["Step ",H.steps.findIndex(e=>"running"===e.status)+1||H.steps.filter(e=>"completed"===e.status).length," of ",H.steps.length]})]}),(0,a.jsxs)("span",{className:"text-sm text-studio-accent font-mono",children:[eL,"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-studio-border rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-studio-accent to-blue-400 transition-all duration-500 ease-out",style:{width:"".concat(eL,"%")}})}),H.current_step&&(0,a.jsx)("div",{className:"text-xs text-studio-accent mt-2 font-medium",children:H.current_step}),eZ&&(0,a.jsx)("div",{className:"text-xs text-studio-muted mt-1 italic",children:eZ})]}),(0,a.jsxs)("div",{className:"p-4",children:["result"===M&&(null==H?void 0:H.result)&&(0,a.jsxs)("div",{ref:eW,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(p,{className:"w-5 h-5"}),"Assessment: ",H.company_name]}),H.run_id&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-studio-panel px-3 py-1.5 rounded border border-studio-border",children:[(0,a.jsx)("span",{className:"text-studio-muted",children:"Run ID:"}),(0,a.jsx)("code",{className:"text-studio-accent font-mono",children:H.run_id}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(H.run_id)},className:"ml-1 px-2 py-0.5 bg-studio-accent/20 hover:bg-studio-accent/30 text-studio-accent rounded text-xs",children:"Copy"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border ".concat(e2(H.result.risk_level)),children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Risk Level",(0,a.jsx)(L,{text:"How risky is it to give credit to this company?\\n\\n• Low = Very safe\\n• Medium = Some concerns\\n• High = Significant risk\\n• Critical = Very dangerous"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold capitalize",children:H.result.risk_level})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Credit Score",(0,a.jsx)(L,{text:"Business credit score (0-1000).\\n\\n• 800-1000 = Excellent\\n• 650-799 = Good\\n• 500-649 = Fair\\n• 350-499 = Poor\\n• 0-349 = Very Poor"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-studio-accent",children:H.result.credit_score})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Confidence",(0,a.jsx)(L,{text:"How confident is the AI about this result?\\n\\n• 80-100% = Very confident\\n• 60-79% = Moderate\\n• 40-59% = Low\\n• 0-39% = Very uncertain\\n\\nLow confidence = limited data available."})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(100*H.result.confidence).toFixed(0),"%"]})]})]}),H.result.reasoning&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-2 flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),"Analysis Summary"]}),(0,a.jsx)("p",{className:"text-sm",children:H.result.reasoning})]}),(null===(e=H.result.recommendations)||void 0===e?void 0:e.length)>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-2 flex items-center gap-2",children:[(0,a.jsx)(C,{className:"w-4 h-4"}),"Recommendations"]}),(0,a.jsx)("ul",{className:"text-sm space-y-1",children:H.result.recommendations.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(y,{className:"w-4 h-4 mt-0.5 text-studio-muted"}),e]},s))})]})]}),"evaluation"===M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(k,{className:"w-5 h-5"}),"Evaluation Summary"]}),ec||eh?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Tool Selection",(0,a.jsx)(L,{text:"Did the AI use the right data sources?\\n\\nCalculated using:\\n• Precision: Were the tools useful?\\n• Recall: Did it use all needed tools?\\n• F1: Balance of both\\n\\nLow score = wrong or missing data sources"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:e1(null!==(s=null==ec?void 0:ec.tool_selection_score)&&void 0!==s?s:null==eh?void 0:eh.tool_selection_score)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Data Quality",(0,a.jsx)(L,{text:"Was the gathered data good enough?\\n\\nChecks:\\n• Completeness of data\\n• Number of sources used\\n• Data freshness\\n\\nLow score = missing data or outdated info"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:e1(null!==(t=null==ec?void 0:ec.data_quality_score)&&void 0!==t?t:null==eh?void 0:eh.data_quality_score)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Synthesis",(0,a.jsx)(L,{text:"Did the AI create a good final report?\\n\\nChecks if output has:\\n• Clear risk level\\n• Justified credit score\\n• Recommendations\\n• Proper reasoning\\n\\nLow score = incomplete report"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:e1(null!==(d=null==ec?void 0:ec.synthesis_score)&&void 0!==d?d:null==eh?void 0:eh.synthesis_score)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm text-studio-muted mb-1 flex items-center",children:["Overall",(0,a.jsx)(L,{text:"Average of all evaluation scores.\\n\\n• 80-100% = Excellent analysis\\n• 60-79% = Good analysis\\n• 40-59% = Fair - review manually\\n• 0-39% = Poor - may need re-run"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-studio-accent",children:e1(null!==(i=null==ec?void 0:ec.overall_score)&&void 0!==i?i:null==eh?void 0:eh.overall_score)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[((null==ec?void 0:ec.tool_selection)||(null==eh?void 0:eh.tool_selection))&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm font-medium mb-2 text-blue-400 flex items-center",children:["Tool Selection Details",(0,a.jsx)(L,{text:"Shows how the score was calculated:\\n\\n• Precision: Of tools used, how many were useful?\\n• Recall: Did it use all the tools it should?\\n• F1: The balance between precision and recall"})]}),(0,a.jsx)("div",{className:"text-xs space-y-1 text-studio-muted",children:(()=>{let e=(null==ec?void 0:ec.tool_selection)||(null==eh?void 0:eh.tool_selection)||{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"Precision:"})," ",(100*(e.precision||0)).toFixed(0),"% ",(0,a.jsx)("span",{className:"text-studio-muted",children:"(useful tools / total used)"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"Recall:"})," ",(100*(e.recall||0)).toFixed(0),"% ",(0,a.jsx)("span",{className:"text-studio-muted",children:"(used tools / needed tools)"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"F1:"})," ",(100*(e.f1_score||0)).toFixed(0),"% ",(0,a.jsx)("span",{className:"text-studio-muted",children:"(balanced score)"})]}),e.reasoning&&(0,a.jsx)("p",{className:"mt-2 text-white",children:e.reasoning})]})})()})]}),((null==ec?void 0:ec.data_quality)||(null==eh?void 0:eh.data_quality))&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm font-medium mb-2 text-purple-400 flex items-center",children:["Data Quality Details",(0,a.jsx)(L,{text:"Shows data gathering results:\\n\\n• Sources: Which data sources provided info\\n• Completeness: % of expected data fields found\\n\\nMore sources + higher completeness = better score"})]}),(0,a.jsx)("div",{className:"text-xs space-y-1 text-studio-muted",children:(()=>{var e;let s=(null==ec?void 0:ec.data_quality)||(null==eh?void 0:eh.data_quality)||{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"Sources:"})," ",(null===(e=s.sources_used)||void 0===e?void 0:e.join(", "))||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"Completeness:"})," ",(100*(s.completeness||0)).toFixed(0),"% ",(0,a.jsx)("span",{className:"text-studio-muted",children:"(data fields found)"})]}),s.reasoning&&(0,a.jsx)("p",{className:"mt-2 text-white",children:s.reasoning})]})})()})]}),((null==ec?void 0:ec.synthesis)||(null==eh?void 0:eh.synthesis))&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"text-sm font-medium mb-2 text-green-400 flex items-center",children:["Synthesis Details",(0,a.jsx)(L,{text:"Shows final report quality:\\n\\n• Score: Overall synthesis quality\\n• Fields: Which required output fields are present\\n\\nAll fields present = higher score"})]}),(0,a.jsx)("div",{className:"text-xs space-y-1 text-studio-muted",children:(()=>{var e;let s=(null==ec?void 0:ec.synthesis)||(null==eh?void 0:eh.synthesis)||{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"Score:"})," ",(100*(s.score||0)).toFixed(0),"% ",(0,a.jsx)("span",{className:"text-studio-muted",children:"(report quality)"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-green-400",children:"Fields:"})," ",(null===(e=s.present_fields)||void 0===e?void 0:e.join(", "))||"N/A"]}),s.reasoning&&(0,a.jsx)("p",{className:"mt-2 text-white",children:s.reasoning})]})})()})]})]}),eh&&(0,a.jsxs)("div",{className:"text-xs text-studio-muted flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Source: MongoDB"}),(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{children:["Evaluated: ",eh.evaluated_at?new Date(eh.evaluated_at).toLocaleString():"N/A"]})]})]}):(0,a.jsxs)("div",{className:"text-center py-12 text-studio-muted",children:[(0,a.jsx)(A,{className:"w-8 h-8 mx-auto mb-3 text-yellow-500"}),(0,a.jsx)("p",{className:"font-medium text-white mb-2",children:"No evaluation data available"}),(0,a.jsx)("p",{className:"text-sm max-w-md mx-auto",children:"Run an analysis first. If Eval Score shows 0% after running, it means the evaluation step hasn't saved data yet - this is normal and doesn't affect your credit analysis results."})]})]}),"traces"===M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5"}),"Execution Traces",eb&&(0,a.jsx)(o.Z,{className:"w-4 h-4 animate-spin ml-2"})]}),eu.length>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3 text-purple-400",children:"LangGraph Events"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-xs",children:[(0,a.jsx)("thead",{className:"bg-black/30",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Timestamp"}),(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Event"}),(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Type"}),(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Status"}),(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Duration"}),(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Model"}),(0,a.jsx)("th",{className:"text-left p-2 text-studio-muted",children:"Tokens"})]})}),(0,a.jsx)("tbody",{children:eu.slice(0,50).map((e,s)=>(0,a.jsxs)("tr",{className:"border-t border-studio-border/50 hover:bg-black/20",children:[(0,a.jsx)("td",{className:"p-2 text-studio-muted font-mono",children:new Date(e.timestamp).toLocaleTimeString()}),(0,a.jsx)("td",{className:"p-2 text-white",children:e.event_name}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-blue-900/30 text-blue-400",children:e.event_type})}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded ".concat("success"===e.status||"completed"===e.status?"bg-green-900/30 text-green-400":"error"===e.status||"failed"===e.status?"bg-red-900/30 text-red-400":"bg-gray-900/30 text-gray-400"),children:e.status})}),(0,a.jsx)("td",{className:"p-2 text-studio-muted",children:e.duration_ms?"".concat(e.duration_ms.toFixed(0),"ms"):"-"}),(0,a.jsx)("td",{className:"p-2 text-studio-muted",children:e.model||"-"}),(0,a.jsx)("td",{className:"p-2 text-studio-muted",children:e.tokens||"-"})]},e._id||s))})]})}),eu.length>50&&(0,a.jsxs)("div",{className:"text-xs text-studio-muted mt-2",children:["Showing 50 of ",eu.length," events"]})]}),(0,a.jsxs)("div",{className:"bg-black/50 rounded-lg border border-studio-border p-4 max-h-[400px] overflow-auto",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3 text-green-400",children:"WebSocket Logs"}),U.length>0?(0,a.jsxs)("div",{className:"space-y-1 font-mono text-xs",children:[U.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("span",{className:"text-studio-muted w-24 flex-shrink-0",children:new Date(e.timestamp).toLocaleTimeString()}),(0,a.jsxs)("span",{className:"w-16 flex-shrink-0 ".concat("error"===e.type?"text-red-400":"warning"===e.type?"text-orange-400":"success"===e.type?"text-green-400":"step"===e.type?"text-studio-accent":"workflow"===e.type?"text-purple-400":"output"===e.type?"text-yellow-400":"text-studio-muted"),children:["[",e.type,"]"]}),(0,a.jsx)("span",{className:"text-white",children:e.message})]},s)),(0,a.jsx)("div",{ref:eq})]}):(0,a.jsx)("div",{className:"text-center py-4 text-studio-muted",children:"No local logs yet."})]}),(null==H?void 0:H.run_id)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-studio-muted",children:[(0,a.jsxs)("span",{children:["Run ID: ",H.run_id]}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(H.run_id),className:"text-studio-accent hover:underline",children:"Copy"}),(0,a.jsxs)("button",{onClick:()=>eB(H.run_id),className:"ml-4 text-studio-accent hover:underline flex items-center gap-1",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3"}),"Refresh Traces"]})]})]}),"pipeline"===M&&H&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(v,{className:"w-5 h-5"}),"Pipeline Overview"]}),(0,a.jsx)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:(0,a.jsx)("div",{className:"flex items-center justify-between gap-2 overflow-x-auto",children:H.steps.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg min-w-[120px] ".concat("completed"===e.status?"bg-green-900/30 border border-green-800":"running"===e.status?"bg-blue-900/30 border border-blue-800":"failed"===e.status?"bg-red-900/30 border border-red-800":"bg-gray-900/30 border border-gray-800"),children:[e0(e.status),(0,a.jsx)("span",{className:"text-xs mt-2 text-center",children:e.name}),(0,a.jsx)("span",{className:"text-[10px] text-studio-muted font-mono",children:e.agent_name}),e.duration_ms&&(0,a.jsxs)("span",{className:"text-xs text-studio-muted",children:[e.duration_ms.toFixed(0),"ms"]})]}),s<H.steps.length-1&&(0,a.jsx)(y,{className:"w-4 h-4 text-studio-muted mx-2"})]},e.step_id))})}),(0,a.jsx)("div",{className:"rounded-lg border border-studio-border overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-studio-panel",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Step"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Agent"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Status"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Duration"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Output"})]})}),(0,a.jsx)("tbody",{children:H.steps.map(e=>(0,a.jsxs)("tr",{className:"border-t border-studio-border",children:[(0,a.jsx)("td",{className:"p-3 font-medium",children:e.name}),(0,a.jsx)("td",{className:"p-3 font-mono text-xs text-studio-muted",children:e.agent_name}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.status?"bg-green-900/50 text-green-400":"running"===e.status?"bg-blue-900/50 text-blue-400":"failed"===e.status?"bg-red-900/50 text-red-400":"bg-gray-900/50 text-gray-400"),children:e.status})}),(0,a.jsx)("td",{className:"p-3 text-studio-muted",children:e.duration_ms?"".concat(e.duration_ms.toFixed(0),"ms"):"-"}),(0,a.jsx)("td",{className:"p-3 text-studio-muted text-xs whitespace-pre-wrap break-all",children:e.output_summary||(e.error?"Error: ".concat(e.error):"-")})]},e.step_id))})]})})]}),!H&&(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-studio-muted",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(u,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Enter a company name and run an analysis to see results"})]})})]})]})]})]}),"batch"===R&&(0,a.jsx)("div",{className:"flex-1 p-6 overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(b,{className:"w-5 h-5"}),"Batch Company Analysis"]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"text-sm text-studio-muted",children:"Companies to Analyze"}),(0,a.jsxs)("button",{onClick:()=>{$(e=>[...e,""])},className:"text-sm text-studio-accent hover:underline flex items-center gap-1",disabled:et,children:[(0,a.jsx)(T,{className:"w-4 h-4"}),"Add Company"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:Y.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>e$(s,e.target.value),placeholder:"Company ".concat(s+1),className:"flex-1 bg-black/50 border border-studio-border rounded px-3 py-2 text-sm focus:outline-none focus:border-studio-accent",disabled:et}),Y.length>1&&(0,a.jsx)("button",{onClick:()=>eY(s),className:"p-2 text-red-400 hover:text-red-300",disabled:et,children:(0,a.jsx)(F,{className:"w-4 h-4"})})]},s))}),(0,a.jsx)("div",{className:"flex gap-2 mt-4",children:(0,a.jsx)("button",{onClick:eK,disabled:et||Y.every(e=>!e.trim()),className:"flex-1 flex items-center justify-center gap-2 bg-studio-accent hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded px-4 py-2 text-sm font-medium",children:et?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 animate-spin"}),"Running ",el.current,"/",el.total,"..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Run Batch Analysis"]})})})]}),ee.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-studio-border overflow-hidden",children:[(0,a.jsx)("div",{className:"p-3 bg-studio-panel border-b border-studio-border flex items-center justify-between",children:(0,a.jsxs)("h3",{className:"font-medium",children:["Batch Results (",ee.length,")"]})}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-studio-panel/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Run ID"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Company"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Status"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Risk"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Score"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Confidence"})]})}),(0,a.jsx)("tbody",{children:ee.map(e=>{var s,t,l,d;return(0,a.jsxs)("tr",{className:"border-t border-studio-border hover:bg-studio-panel/30",children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("code",{className:"text-xs font-mono text-studio-accent bg-studio-panel px-1.5 py-0.5 rounded break-all",title:e.run_id,children:e.run_id}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.run_id),className:"text-xs text-studio-muted hover:text-studio-accent px-1",title:"Copy full Run ID",children:"Copy"})]})}),(0,a.jsx)("td",{className:"p-3 font-medium",children:e.company_name}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.status?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"),children:e.status})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e2((null===(s=e.result)||void 0===s?void 0:s.risk_level)||"")),children:(null===(t=e.result)||void 0===t?void 0:t.risk_level)||"N/A"})}),(0,a.jsx)("td",{className:"p-3",children:(null===(l=e.result)||void 0===l?void 0:l.credit_score)||"N/A"}),(0,a.jsx)("td",{className:"p-3",children:(null===(d=e.result)||void 0===d?void 0:d.confidence)?"".concat((100*e.result.confidence).toFixed(0),"%"):"N/A"})]},e.run_id)})})]})]})]})}),"history"===R&&(0,a.jsx)("div",{className:"flex-1 p-6 overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(n,{className:"w-5 h-5"}),"Session Runs (",er.length,")"]})}),er.length>0?(0,a.jsx)("div",{className:"rounded-lg border border-studio-border overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-studio-panel",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Run ID"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Company"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Status"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Risk"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Score"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Duration"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Time"})]})}),(0,a.jsx)("tbody",{children:er.map(e=>(0,a.jsxs)("tr",{className:"border-t border-studio-border hover:bg-studio-panel/30",children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("code",{className:"text-xs font-mono text-studio-accent bg-studio-panel px-1.5 py-0.5 rounded break-all",title:e.run_id,children:e.run_id}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.run_id),className:"text-xs text-studio-muted hover:text-studio-accent px-1",title:"Copy full Run ID",children:"Copy"})]})}),(0,a.jsx)("td",{className:"p-3 font-medium",children:e.company_name}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.status?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"),children:e.status})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e2(e.risk_level||"")),children:e.risk_level||"N/A"})}),(0,a.jsx)("td",{className:"p-3",children:e.credit_score||"N/A"}),(0,a.jsx)("td",{className:"p-3 text-studio-muted",children:e.duration_ms?"".concat((e.duration_ms/1e3).toFixed(1),"s"):"-"}),(0,a.jsx)("td",{className:"p-3 text-studio-muted",children:new Date(e.completed_at||e.started_at).toLocaleString()})]},e.run_id))})]})}):(0,a.jsx)("div",{className:"text-center py-8 text-studio-muted border border-studio-border rounded-lg bg-studio-panel",children:(0,a.jsx)("p",{children:"No session runs yet. Run an analysis to see history."})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5"}),"Historical Runs (",eg.length,")"]}),(0,a.jsxs)("button",{onClick:()=>eV(ev),className:"text-sm text-studio-accent hover:underline flex items-center gap-1",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3"}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("input",{type:"text",value:ev,onChange:e=>ef(e.target.value),onKeyDown:e=>"Enter"===e.key&&eV(ev),placeholder:"Search by run ID or company name...",className:"flex-1 bg-studio-panel border border-studio-border rounded px-3 py-2 text-sm focus:outline-none focus:border-studio-accent"}),(0,a.jsx)("button",{onClick:()=>eV(ev),className:"px-4 py-2 bg-studio-accent hover:bg-blue-600 rounded text-sm font-medium transition-colors",children:"Search"}),ev&&(0,a.jsx)("button",{onClick:()=>{ef(""),eV()},className:"px-3 py-2 text-studio-muted hover:text-white transition-colors",title:"Clear search",children:"Clear"})]}),eg.length>0?(0,a.jsx)("div",{className:"rounded-lg border border-studio-border overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-studio-panel",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Run ID"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Company"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Risk"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Score"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Time"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:eg.map(e=>(0,a.jsxs)("tr",{className:"border-t border-studio-border hover:bg-studio-panel/50 cursor-pointer transition-colors",onClick:()=>eH(e.run_id),children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("code",{className:"text-xs font-mono text-studio-accent bg-studio-panel px-1.5 py-0.5 rounded break-all",title:e.run_id,children:[e.run_id.slice(0,8),"..."]}),(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),navigator.clipboard.writeText(e.run_id)},className:"text-xs text-studio-muted hover:text-studio-accent px-1",title:"Copy full Run ID",children:"Copy"})]})}),(0,a.jsx)("td",{className:"p-3 font-medium",children:e.company_name}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e2(e.risk_level||"")),children:e.risk_level||"N/A"})}),(0,a.jsx)("td",{className:"p-3",children:e.credit_score||"N/A"}),(0,a.jsx)("td",{className:"p-3 text-studio-muted",children:new Date(e.completed_at||e.started_at).toLocaleString()}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),W(e.company_name),D("single")},className:"text-studio-accent hover:underline text-xs",children:"Re-analyze"})})]},e.run_id))})]})}):(0,a.jsxs)("div",{className:"text-center py-8 text-studio-muted border border-studio-border rounded-lg bg-studio-panel",children:[(0,a.jsx)(n,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No historical data. Connect MongoDB to see past runs."})]})]})]})})]}),e_&&(0,a.jsx)(O,{runId:e_,details:eS,loading:eA,onClose:()=>{ek(null),eC(null)}}),(0,a.jsx)(I,{isOpen:ey,onClose:()=>ew(!1)})]})}function O(e){var s,t,d,r,n,m,x,h,p,b,j,g,N,v,f,y,S,C,A,T,F,Z,E,L,I,P;let{runId:q,details:O,loading:W,onClose:z}=e,[V,H]=(0,l.useState)("summary"),B=e=>e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),U=e=>e<.01?"$".concat(e.toFixed(6)):"$".concat(e.toFixed(4));return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:z,children:(0,a.jsxs)("div",{className:"bg-studio-bg border border-studio-border rounded-lg w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-studio-border bg-studio-panel flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-studio-accent"}),"Run Details"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("code",{className:"text-xs font-mono text-studio-muted bg-black/30 px-2 py-0.5 rounded",children:q}),(null==O?void 0:null===(s=O.summary)||void 0===s?void 0:s.company_name)&&(0,a.jsx)("span",{className:"text-sm text-studio-accent",children:O.summary.company_name})]})]}),(0,a.jsx)("button",{onClick:z,className:"p-2 hover:bg-studio-border rounded transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]}),W&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 text-studio-muted",children:[(0,a.jsx)(o.Z,{className:"w-6 h-6 animate-spin"}),"Loading run details..."]})}),!W&&O&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border-b border-studio-border bg-studio-panel px-4",children:(0,a.jsx)("nav",{className:"flex gap-1",children:[{id:"summary",label:"Summary",icon:_.Z},{id:"evaluation",label:"Evaluation",icon:k},{id:"coalition",label:"Coalition",icon:c},{id:"llm",label:"LLM Calls",icon:w.Z},{id:"nodes",label:"Nodes & Agents",icon:R},{id:"assessment",label:"Assessment",icon:D}].map(e=>(0,a.jsxs)("button",{onClick:()=>H(e.id),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border-b-2 transition-colors ".concat(V===e.id?"border-studio-accent text-studio-accent":"border-transparent text-studio-muted hover:text-studio-text"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["summary"===V&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Status"}),(0,a.jsx)("div",{className:"font-semibold ".concat((null===(t=O.summary)||void 0===t?void 0:t.status)==="completed"?"text-green-400":"text-yellow-400"),children:(null===(d=O.summary)||void 0===d?void 0:d.status)||"Unknown"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Risk Level"}),(0,a.jsx)("div",{className:"font-semibold ".concat((null===(r=O.summary)||void 0===r?void 0:r.risk_level)==="low"?"text-green-400":(null===(n=O.summary)||void 0===n?void 0:n.risk_level)==="medium"?"text-yellow-400":"text-red-400"),children:(null===(m=O.summary)||void 0===m?void 0:m.risk_level)||"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Credit Score"}),(0,a.jsx)("div",{className:"font-semibold text-studio-accent",children:(null===(x=O.summary)||void 0===x?void 0:x.credit_score)||"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Duration"}),(0,a.jsx)("div",{className:"font-semibold",children:(null===(h=O.summary)||void 0===h?void 0:h.duration_ms)?B(O.summary.duration_ms):"N/A"})]})]}),(null===(p=O.summary)||void 0===p?void 0:p.final_decision)&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-sm text-studio-muted mb-2",children:"Final Decision"}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat("APPROVED"===O.summary.final_decision?"text-green-400":"REJECTED"===O.summary.final_decision?"text-red-400":"text-yellow-400"),children:O.summary.final_decision}),O.summary.decision_reasoning&&(0,a.jsx)("p",{className:"text-sm text-studio-muted mt-2",children:O.summary.decision_reasoning})]}),(null===(b=O.summary)||void 0===b?void 0:b.reasoning)&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-sm text-studio-muted mb-2",children:"Analysis Reasoning"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:O.summary.reasoning})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Total Tokens"}),(0,a.jsx)("div",{className:"font-semibold",children:(null===(g=O.summary)||void 0===g?void 0:null===(j=g.total_tokens)||void 0===j?void 0:j.toLocaleString())||"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Total Cost"}),(0,a.jsx)("div",{className:"font-semibold",children:(null===(N=O.summary)||void 0===N?void 0:N.total_cost)?U(O.summary.total_cost):"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"LLM Calls"}),(0,a.jsx)("div",{className:"font-semibold",children:(null===(v=O.summary)||void 0===v?void 0:v.llm_calls_count)||(null===(f=O.llm_calls)||void 0===f?void 0:f.length)||"N/A"})]})]})]}),"evaluation"===V&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Overall Score"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-studio-accent",children:(null===(y=O.summary)||void 0===y?void 0:y.overall_score)?(100*O.summary.overall_score).toFixed(1)+"%":"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Tool Selection"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null===(S=O.summary)||void 0===S?void 0:S.tool_selection_score)?(100*O.summary.tool_selection_score).toFixed(1)+"%":"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Data Quality"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null===(C=O.summary)||void 0===C?void 0:C.data_quality_score)?(100*O.summary.data_quality_score).toFixed(1)+"%":"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Synthesis"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null===(A=O.summary)||void 0===A?void 0:A.synthesis_score)?(100*O.summary.synthesis_score).toFixed(1)+"%":"N/A"})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-studio-muted",children:"Confidence"}),(0,a.jsx)("span",{className:"font-semibold",children:(null===(T=O.summary)||void 0===T?void 0:T.confidence)?(100*O.summary.confidence).toFixed(1)+"%":"N/A"})]}),(0,a.jsx)("div",{className:"w-full bg-studio-border rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-studio-accent h-2 rounded-full transition-all",style:{width:"".concat(100*((null===(F=O.summary)||void 0===F?void 0:F.confidence)||0),"%")}})})]}),O.evaluation&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Evaluation Details"}),(0,a.jsx)("pre",{className:"text-xs text-studio-muted overflow-x-auto bg-black/30 p-3 rounded",children:JSON.stringify(O.evaluation,null,2)})]}),(null===(Z=O.summary)||void 0===Z?void 0:Z.tools_used)&&O.summary.tools_used.length>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Tools Used"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:O.summary.tools_used.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-studio-accent/20 text-studio-accent rounded text-xs",children:e},s))})]})]}),"llm"===V&&(0,a.jsxs)("div",{className:"space-y-4",children:[O.llm_summary&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Total Calls"}),(0,a.jsx)("div",{className:"text-xl font-bold",children:O.llm_summary.total_calls||0})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Input Tokens"}),(0,a.jsx)("div",{className:"text-xl font-bold",children:(null===(E=O.llm_summary.total_input_tokens)||void 0===E?void 0:E.toLocaleString())||0})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Output Tokens"}),(0,a.jsx)("div",{className:"text-xl font-bold",children:(null===(L=O.llm_summary.total_output_tokens)||void 0===L?void 0:L.toLocaleString())||0})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Estimated Cost"}),(0,a.jsx)("div",{className:"text-xl font-bold",children:U(O.llm_summary.total_cost||0)})]})]}),O.llm_calls&&O.llm_calls.length>0?(0,a.jsx)("div",{className:"rounded-lg border border-studio-border overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-studio-panel",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Model"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Call Type"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Tokens (In/Out)"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Estimated Cost"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Duration"})]})}),(0,a.jsx)("tbody",{children:O.llm_calls.map((e,s)=>(0,a.jsxs)("tr",{className:"border-t border-studio-border",children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("code",{className:"text-xs bg-studio-panel px-1.5 py-0.5 rounded",children:e.model||"Unknown"})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-0.5 bg-blue-900/30 text-blue-400 rounded text-xs",children:e.call_type||"-"})}),(0,a.jsxs)("td",{className:"p-3",children:[(e.prompt_tokens||e.input_tokens||0).toLocaleString()," / ",(e.completion_tokens||e.output_tokens||0).toLocaleString()]}),(0,a.jsx)("td",{className:"p-3",children:U(e.total_cost||e.cost||0)}),(0,a.jsx)("td",{className:"p-3",children:e.execution_time_ms||e.duration_ms?B(e.execution_time_ms||e.duration_ms):"-"})]},s))})]})}):(0,a.jsx)("div",{className:"text-center py-8 text-studio-muted border border-studio-border rounded-lg",children:"No LLM call data available"})]}),"nodes"===V&&(0,a.jsxs)("div",{className:"space-y-4",children:[O.langgraph_summary&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Workflow Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-studio-muted",children:"Total Nodes: "}),(0,a.jsx)("span",{className:"font-medium",children:O.langgraph_summary.total_nodes||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-studio-muted",children:"Total Events: "}),(0,a.jsx)("span",{className:"font-medium",children:O.langgraph_summary.total_events||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-studio-muted",children:"Duration: "}),(0,a.jsx)("span",{className:"font-medium",children:O.langgraph_summary.total_duration_ms?B(O.langgraph_summary.total_duration_ms):"N/A"})]})]})]}),(null===(I=O.summary)||void 0===I?void 0:I.agents_used)&&O.summary.agents_used.length>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Agents Used"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:O.summary.agents_used.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1.5 bg-purple-900/30 text-purple-400 border border-purple-800 rounded text-sm",children:e},s))})]}),O.langgraph_events&&O.langgraph_events.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("h3",{className:"text-sm font-medium",children:["Workflow Steps (",O.langgraph_events.length,")"]})}),(0,a.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:O.langgraph_events.map((e,s)=>{let t=e.event_type||e.event_name||"step",l=e.node||e.node_name||e.event_name||"Unknown",d=e.agent_name||"",r=e.duration_ms||e.execution_time_ms||0,i=e.status||(t.includes("end")||t.includes("exit")?"completed":"started"),n=e.output_preview||e.output||e.output_data||e.input_preview||e.input_data;return(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel hover:border-studio-accent/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("span",{className:"text-lg font-mono text-studio-muted",children:["#",s+1]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("completed"===i||"success"===i?"bg-green-900/50 text-green-400 border border-green-800":"started"===i||"running"===i?"bg-blue-900/50 text-blue-400 border border-blue-800":"error"===i?"bg-red-900/50 text-red-400 border border-red-800":"bg-gray-800 text-gray-400 border border-gray-700"),children:i}),(0,a.jsx)("span",{className:"font-semibold text-studio-text",children:l}),d&&(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-900/30 text-purple-400 border border-purple-800 rounded text-xs",children:d}),r>0&&(0,a.jsx)("span",{className:"ml-auto text-sm text-studio-accent font-medium",children:B(r)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-studio-muted",children:[e.company_name&&(0,a.jsxs)("span",{children:["Company: ",(0,a.jsx)("span",{className:"text-studio-text",children:e.company_name})]}),void 0!==e.step_number&&(0,a.jsxs)("span",{children:["Step: ",(0,a.jsx)("span",{className:"text-studio-text",children:e.step_number})]}),(e.timestamp||e.logged_at)&&(0,a.jsxs)("span",{children:["Time: ",(0,a.jsx)("span",{className:"text-studio-text",children:new Date(e.timestamp||e.logged_at).toLocaleTimeString()})]})]}),n&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-black/40 rounded border border-studio-border",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1 font-medium",children:"Output Preview:"}),(0,a.jsx)("pre",{className:"text-xs text-studio-text whitespace-pre-wrap overflow-x-auto max-h-40 overflow-y-auto",children:"string"==typeof n?n.substring(0,500)+(n.length>500?"...":""):JSON.stringify(n,null,2).substring(0,500)})]}),e.error&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-red-900/20 rounded border border-red-800",children:[(0,a.jsx)("div",{className:"text-xs text-red-400 font-medium",children:"Error:"}),(0,a.jsx)("p",{className:"text-xs text-red-300 mt-1",children:e.error})]})]},s)})})]}):(0,a.jsx)("div",{className:"text-center py-8 text-studio-muted border border-studio-border rounded-lg",children:"No workflow event data available"})]}),"assessment"===V&&(0,a.jsx)("div",{className:"space-y-4",children:O.assessment?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Risk Level"}),(0,a.jsx)("div",{className:"text-xl font-bold ".concat("low"===(O.assessment.overall_risk_level||O.assessment.risk_level)?"text-green-400":"medium"===(O.assessment.overall_risk_level||O.assessment.risk_level)?"text-yellow-400":"text-red-400"),children:O.assessment.overall_risk_level||O.assessment.risk_level||"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Credit Score"}),(0,a.jsx)("div",{className:"text-xl font-bold text-studio-accent",children:O.assessment.credit_score_estimate||O.assessment.credit_score||"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Confidence"}),(0,a.jsx)("div",{className:"text-xl font-bold",children:O.assessment.confidence_score||O.assessment.confidence?(100*(O.assessment.confidence_score||O.assessment.confidence)).toFixed(0)+"%":"N/A"})]})]}),(O.assessment.llm_reasoning||O.assessment.reasoning)&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Analysis Reasoning"}),(0,a.jsx)("p",{className:"text-sm text-studio-muted whitespace-pre-wrap",children:O.assessment.llm_reasoning||O.assessment.reasoning})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.assessment.risk_factors&&O.assessment.risk_factors.length>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-red-900/50 bg-red-900/10",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-400 mb-2",children:"Risk Factors"}),(0,a.jsx)("ul",{className:"text-sm text-studio-muted space-y-1",children:O.assessment.risk_factors.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-red-400",children:"•"}),e]},s))})]}),O.assessment.positive_factors&&O.assessment.positive_factors.length>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-green-900/50 bg-green-900/10",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-green-400 mb-2",children:"Positive Factors"}),(0,a.jsx)("ul",{className:"text-sm text-studio-muted space-y-1",children:O.assessment.positive_factors.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-400",children:"•"}),e]},s))})]})]}),O.assessment.recommendations&&O.assessment.recommendations.length>0&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-accent/50 bg-studio-accent/10",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-studio-accent mb-2",children:"Recommendations"}),(0,a.jsx)("ul",{className:"text-sm text-studio-muted space-y-1",children:O.assessment.recommendations.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsxs)("span",{className:"text-studio-accent",children:[s+1,"."]}),e]},s))})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Full Assessment Data"}),(0,a.jsx)("pre",{className:"text-xs text-studio-muted overflow-x-auto bg-black/30 p-3 rounded max-h-96 overflow-y-auto",children:JSON.stringify(O.assessment,null,2)})]})]}):(0,a.jsx)("div",{className:"text-center py-8 text-studio-muted border border-studio-border rounded-lg",children:"No assessment data available"})}),"coalition"===V&&(0,a.jsx)("div",{className:"space-y-4",children:O.coalition?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Correctness"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat("high"===O.coalition.correctness_category?"text-green-400":"medium"===O.coalition.correctness_category?"text-yellow-400":"text-red-400"),children:O.coalition.correctness_score?(100*O.coalition.correctness_score).toFixed(1)+"%":"N/A"}),(0,a.jsx)("div",{className:"text-xs mt-1 ".concat("high"===O.coalition.correctness_category?"text-green-400":"medium"===O.coalition.correctness_category?"text-yellow-400":"text-red-400"),children:null===(P=O.coalition.correctness_category)||void 0===P?void 0:P.toUpperCase()})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Confidence"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:O.coalition.confidence?(100*O.coalition.confidence).toFixed(1)+"%":"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Agreement"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:O.coalition.agreement_score?(100*O.coalition.agreement_score).toFixed(1)+"%":"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("div",{className:"text-xs text-studio-muted mb-1",children:"Evaluators"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:O.coalition.num_evaluators||0})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-4",children:"Component Scores"}),(0,a.jsx)("div",{className:"space-y-3",children:[{label:"Agent Efficiency",score:O.coalition.efficiency_score,color:"blue"},{label:"LLM Quality",score:O.coalition.quality_score,color:"purple"},{label:"Tool Selection",score:O.coalition.tool_score,color:"green"},{label:"Consistency",score:O.coalition.consistency_score,color:"orange"}].map(e=>{let{label:s,score:t,color:l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm text-studio-muted",children:s}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t?(100*t).toFixed(1)+"%":"N/A"})]}),(0,a.jsx)("div",{className:"w-full bg-studio-border rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all bg-".concat(l,"-500"),style:{width:"".concat(100*(t||0),"%"),backgroundColor:"blue"===l?"#3b82f6":"purple"===l?"#a855f7":"green"===l?"#22c55e":"#f97316"}})})]},s)})})]}),O.coalition.votes&&O.coalition.votes.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-studio-border overflow-hidden",children:[(0,a.jsx)("div",{className:"p-3 bg-studio-panel border-b border-studio-border",children:(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Evaluator Votes"})}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-studio-panel/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Evaluator"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Score"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Confidence"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Weight"}),(0,a.jsx)("th",{className:"text-left p-3 text-studio-muted",children:"Weighted"})]})}),(0,a.jsx)("tbody",{children:O.coalition.votes.map((e,s)=>{var t;return(0,a.jsxs)("tr",{className:"border-t border-studio-border",children:[(0,a.jsx)("td",{className:"p-3 font-medium",children:null===(t=e.evaluator)||void 0===t?void 0:t.replace("_"," ")}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("span",{className:e.score>=.7?"text-green-400":e.score>=.4?"text-yellow-400":"text-red-400",children:[(100*e.score).toFixed(1),"%"]})}),(0,a.jsxs)("td",{className:"p-3",children:[(100*e.confidence).toFixed(0),"%"]}),(0,a.jsxs)("td",{className:"p-3",children:[(100*e.weight).toFixed(0),"%"]}),(0,a.jsxs)("td",{className:"p-3",children:[(100*e.weighted_score).toFixed(2),"%"]})]},s)})})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-studio-border bg-studio-panel",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Full Evaluation Details"}),(0,a.jsx)("pre",{className:"text-xs text-studio-muted overflow-x-auto bg-black/30 p-3 rounded max-h-96 overflow-y-auto",children:JSON.stringify(O.coalition,null,2)})]})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-studio-muted border border-studio-border rounded-lg",children:[(0,a.jsx)(M.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Coalition evaluation not available for this run"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Evaluation may still be processing"})]})})]})]}),!W&&(!O||!O.found)&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"text-center text-studio-muted",children:[(0,a.jsx)(M.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"No data found for this run"}),(0,a.jsxs)("p",{className:"text-xs mt-1",children:["Run ID: ",q]})]})})]})})}}},function(e){e.O(0,[773,971,458,744],function(){return e(e.s=8945)}),_N_E=e.O()}]);